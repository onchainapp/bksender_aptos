(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{433:function(e,t,r){"use strict";r.r(t),function(e){r(212),r(28),r(105),r(213),r(62),r(159);var n,o,c,m,d,f,l,h,k,x,T,S,v,y,A,w,R,O,j,E,_,I,P,F,B,G,D,K,U,N,C,H,L,V,X,z,M,W,J,Y,Q,Z,$,ee,te,re,ne,ae,se,oe,ce,ue,ie,me,pe,de,fe=r(33),le=(r(79),r(97),r(30),r(0)),he=(r(75),r(76),r(26),r(1)),be=r(6),ke=(r(454),r(117)),ge=r(3),xe=(r(455),r(168)),Te={dappFee:function(e,t,r,n){if(e.isVIP)return 0;var o=r.metamask.decimals;return Object(ge.a)(e.txFee).div(Object(ge.a)(10).pow(Object(ge.a)(o))).toString(10)},txFee:function(e){if(e.isVIP)return 0;try{return Object(ge.a)(e.extraFee).gt(Object(ge.a)(e.txFee))?Object(ge.a)(e.extraFee).toString(10):e.txFee}catch(t){return e.txFee}},vipFee:function(e){try{return Object(be.fromWei)(e.vipFee,"ether")}catch(e){return"1"}},referralFee:function(e){try{return Object(be.fromWei)(e.referralFee,"ether")}catch(e){return"0.01"}}},Se=(n={setUsedBurnerKey:(de=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.usedBurnerKey,n("SET_USED_BURNER_KEY",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return de.apply(this,arguments)}),setGasPrice:(pe=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.gasPrice,n("SET_GAS_PRICE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return pe.apply(this,arguments)}),setUsedSimple:(me=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.simple,n("SET_SIMPLE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return me.apply(this,arguments)}),setExtraFee:(ie=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.extraFee,n("SET_EXTRA_FEE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ie.apply(this,arguments)}),createNewAddress:(ue=Object(le.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r=Keypair.generate(),e.abrupt("return",{address:r.publicKey.toString(),privateKey:"["+r.secretKey+"]"});case 3:case"end":return e.stop()}}),e)}))),function(e){return ue.apply(this,arguments)}),saveReferralAddress:(ce=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,address=r.address,n("SET_REFERRAL_ADDRESS",address);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ce.apply(this,arguments)}),saveBurnerKey:(oe=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.burnerKey,n("SET_BURNER_KEY",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return oe.apply(this,arguments)}),createBurnKey:(se=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,t.getters,n=t.commit,e.next=3,r("createNewAddress");case 3:return o=e.sent,n("SET_BURNER_KEY",o),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e){return se.apply(this,arguments)}),createNewUniqueId:(ae=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r=Date.parse(new Date),n=10*Math.random(),e.abrupt("return",Object(be.fromAscii)(r+"_"+n));case 4:case"end":return e.stop()}}),e)}))),function(e){return ae.apply(this,arguments)}),createNewUniqueId_V1:(ne=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r.fromAddress,r.toAddress,n=Date.parse(new Date),o=10*Math.random(),e.abrupt("return",Object(be.fromAscii)(n+"_"+o));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return ne.apply(this,arguments)}),createNewUniqueId_V2:(re=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,n=r.fromAddress,e.abrupt("return",Object(be.padLeft)(Object(be.hexToBytes)(n,32)));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return re.apply(this,arguments)}),getBulksenderContractAddress:(te=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.commit,e.next=3,r.bulksenderInstance();case 3:o=e.sent,n("SET_BULKSENDER_ADDRESS",o._address);case 5:case"end":return e.stop()}}),e)}))),function(e){return te.apply(this,arguments)}),clearUsedParams:(ee=Object(le.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.dispatch,r=t.commit,t.rootState,r("CLEAR");case 2:case"end":return e.stop()}}),e)}))),function(e){return ee.apply(this,arguments)}),initBaseParams:($=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,r=t.dispatch,n=t.commit,o=t.rootState,c=o.metamask,m=c.netId,c.gasPrice,d=ke.a["netId".concat(m)],f=d.explorerUrl,l=d.bulksenderContract,n("SET_TX_URL",f.tx),n("SET_ADDRESS_URL",f.address),f.params?n("SET_EXPLORER_PARAMS",f.params):n("SET_EXPLORER_PARAMS",""),r("getTxFee"),r("getVIPFee"),r("getVIPStatus"),n("SET_BULKSENDER_ADDRESS",l);case 10:case"end":return e.stop()}}),e)}))),function(e){return $.apply(this,arguments)}),getChainId:(Z=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,r=t.rootState,n=r.metamask,o=n.netId,"walletLink"!=(c=n.providerName)&&"walletConnect"!=c){e.next=4;break}return e.abrupt("return",1);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),function(e){return Z.apply(this,arguments)}),getNFTActionType:(Q=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,n=t.rootState,t.rootGetters,o=n.token.tokenType,e.t0=o,e.next=1===e.t0?6:2===e.t0?8:10;break;case 6:return r.simple,e.abrupt("break",10);case 8:return e.abrupt("break",10);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),function(e){return Q.apply(this,arguments)}),getTxFee:(Y=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,t.dispatch,t.getters,o=t.rootGetters,t.state,c=o["metamask/networkConfig"],m=c.rpcCallRetryAttempt,d=c.txFee,e.abrupt("return",new Promise((function(e,t){var o=function(){var c=Object(le.a)(regeneratorRuntime.mark((function c(f){var l,h,k,x;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:l=f.retryAttempt,h=void 0===l?1:l,h++;try{k=r.metamask.decimals,x=Object(ge.a)(d).times(Object(ge.a)(10).pow(Object(ge.a)(k))),n("SET_TX_FEE",x),console.log("Tx fee",x),e(x)}catch(e){h>=m?t(e):o({retryAttempt:h})}case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();o({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return Y.apply(this,arguments)}),getVIPFee:(J=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,r=t.commit,t.dispatch,t.getters,n=t.rootGetters,o=t.state,c=n["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var n=function(){var m=Object(le.a)(regeneratorRuntime.mark((function m(d){var f,l,h;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:f=d.retryAttempt,l=void 0===f?1:f,l++;try{h=o.vipFee,r("SET_VIP_FEE",h),console.log("VIP fee",h),e(h)}catch(e){l>=c?t(e):n({retryAttempt:l})}case 3:case"end":return m.stop()}}),m)})));return function(e){return m.apply(this,arguments)}}();n({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return J.apply(this,arguments)}),getReferralFee:(W=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(le.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,data,S,v;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.referrerFee().encodeABI(),S={method:"eth_call",params:[{from:x,to:T._address,data:data},"latest"],from:x},f.next=11,o("metamask/sendAsync",S,{root:!0});case 11:v=f.sent,v=Object(be.hexToNumberString)(v),n("SET_REFERRAL_FEE",v),console.log("Referral reward",v),e(v),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),k>=d?t(f.t0):m({retryAttempt:k});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return W.apply(this,arguments)}),getVIPStatus:(M=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,t.dispatch,t.getters,o=t.rootGetters,t.state,c=o["metamask/networkConfig"],m=c.rpcCallRetryAttempt,d=c.whiteAccountList,f=r.metamask.ethAccount,e.abrupt("return",new Promise((function(e,t){var r=function(){var o=Object(le.a)(regeneratorRuntime.mark((function o(c){var l,h,k;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:l=c.retryAttempt,h=void 0===l?1:l,h++;try{k=!1,d.includes(f)&&(k=!0),n("SET_IS_VIP",k),console.log("VIP Status",k),e(k)}catch(e){h>=m?t(e):r({retryAttempt:h})}case 3:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return M.apply(this,arguments)}),buyVIP:(z=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,Object(fe.a)(r),e.next=4,n("_buyVIP",{});case 4:return c=e.sent,o("SET_VIP_TX_HASH",c),o("SET_VIP_TX_STATUS",0),n("checkBulksenderVIPBuyingTransactionStatus",{txHash:c}),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return z.apply(this,arguments)}),_buyVIP:(X=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(fe.a)(r),d=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var f=Object(le.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,S,v,data,y,A;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,x=c.metamask.gasPrice.fast,T=c.metamask.ethAccount,f.next=7,o.bulksenderInstance();case 7:return S=f.sent,v=S._address,data=S.methods.registerVIP().encodeABI(),y={method:"eth_sendTransaction",params:[{from:T,to:v,gas:Object(be.numberToHex)(1e5),gasPrice:Object(be.toHex)(Object(be.toWei)(x.toString(),"gwei")),value:Object(be.toHex)(n.vipFee),data:data}],from:T},f.next=13,m("metamask/sendAsync",y,{root:!0});case 13:A=f.sent,e(A),f.next=20;break;case 17:f.prev=17,f.t0=f.catch(2),k>=d||4001==f.t0.code?t(f.t0):r({retryAttempt:k});case 20:case"end":return f.stop()}}),f,null,[[2,17]])})));return function(e){return f.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return X.apply(this,arguments)}),_addVIPs:(V=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(fe.a)(r),d=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(le.a)(regeneratorRuntime.mark((function n(f){var l,h,k,x,T,S,v,data,y,A;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,n.prev=2,k=c.metamask.gasPrice.fast,x=c.metamask.ethAccount,n.next=7,o.bulksenderInstance();case 7:return T=n.sent,S=T._address,v=["0x35Ab957186d120F10ac5aa0c6410004B10c9F21a"],data=T.methods.addToVIPList(v).encodeABI(),y={method:"eth_sendTransaction",params:[{from:x,to:S,gas:Object(be.numberToHex)(3e6),gasPrice:Object(be.toHex)(Object(be.toWei)(k.toString(),"gwei")),value:Object(be.toHex)(0),data:data}],from:x},n.next=14,m("metamask/sendAsync",y,{root:!0});case 14:A=n.sent,e(A),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(2),h>=d||4001==n.t0.code?t(n.t0):r({retryAttempt:h});case 21:case"end":return n.stop()}}),n,null,[[2,18]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return V.apply(this,arguments)}),slpTokenTransfer:(L=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,k,x,T,S,v,y,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,r=t.rootGetters,n=t.getters,o=t.state,e.prev=1,c=new PublicKey(o.accountPublicKey),e.next=5,n.getEthereumProvider();case 5:return m=e.sent,e.next=8,r["metamask/connection"]();case 8:return d=e.sent,f=new PublicKey("HLWzqA77FzXqe79ku6GuARgn9W3b7L2SKYt16zasEeuy"),l=new Token(d,f,TOKEN_PROGRAM_ID,c),e.next=14,Token.getAssociatedTokenAddress(l.associatedProgramId,l.programId,l.publicKey,c);case 14:return h=e.sent,k=new PublicKey("HNhKPG1edbhJomsCDTCLD2PxBX6H1GBVUc11PkbWB3dA"),e.next=19,Token.getAssociatedTokenAddress(l.associatedProgramId,l.programId,l.publicKey,k);case 19:return x=e.sent,T=new Transaction,e.next=23,d.getAccountInfo(x);case 23:return null===e.sent&&(console.info("hello"),T.add(Token.createAssociatedTokenAccountInstruction(l.associatedProgramId,l.programId,l.publicKey,x,k,c))),T.add(Token.createTransferInstruction(TOKEN_PROGRAM_ID,h,x,c,[],1e8)),e.next=28,d.getRecentBlockhash();case 28:return S=e.sent,v=S.blockhash,T.recentBlockhash=v,T.feePayer=c,e.next=34,m.signTransaction(T);case 34:return y=e.sent,A=y.signature,console.info(A),e.next=39,d.confirmTransaction(A);case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(1),console.info(e.t0);case 44:case"end":return e.stop()}}),e,null,[[1,41]])}))),function(e){return L.apply(this,arguments)}),_bulksendToken:(H=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,f=r.batch,l=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var h=Object(le.a)(regeneratorRuntime.mark((function h(k){var x,T,S,v,y,A,w,address,R,O,j,E,_,I,P,F,B,G,D,K,U;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return x=k.retryAttempt,T=void 0===x?1:x,T++,h.prev=2,S=o.metamask.accountPublicKey,v=new PublicKey(S),h.next=7,c["metamask/connectionChanged"]();case 7:return y=h.sent,h.next=10,c["metamask/getEthereumProvider"]();case 10:return h.sent,A=f.addressValues,w=o.token,address=w.address,R=w.tokenSelected,O=R.decimals,j=new PublicKey(address),E=new Token(y,j,TOKEN_PROGRAM_ID,v),h.next=19,Token.getAssociatedTokenAddress(E.associatedProgramId,E.programId,E.publicKey,v);case 19:return _=h.sent,I=v,n.usedBurnerKey&&(I=new PublicKey(n.burnerKey.address)),P=new Transaction,A.forEach((function(e){var t=Object(ge.a)(e.amount).times(Object(ge.a)(10).pow(Object(ge.a)(O))).toString(10),address=e.address,r=e.tokenAccount;e.isNew&&P.add(Token.createAssociatedTokenAccountInstruction(E.associatedProgramId,E.programId,E.publicKey,r,new PublicKey(address),I)),P.add(Token.createTransferInstruction(TOKEN_PROGRAM_ID,_,r,I,[],t))})),console.info(P),h.next=27,y.getRecentBlockhash();case 27:return F=h.sent,B=F.blockhash,P.recentBlockhash=B,P.feePayer=I,h.next=33,m("processDappFee",{transaction:P});case 33:if(P=h.sent,!n.usedBurnerKey){h.next=44;break}return G=Keypair.fromSecretKey(Uint8Array.from(JSON.parse(n.burnerKey.privateKey))),console.info("connection",y),h.next=39,y.sendTransaction(P,[G]);case 39:D=h.sent,e(D),console.log("bulksend tx sent",D),h.next=52;break;case 44:return h.next=46,m("signTransaction",{transaction:P});case 46:return K=h.sent,h.next=49,y.sendRawTransaction(K.serialize());case 49:U=h.sent,e(U),console.log("bulksend tx sent",U);case 52:h.next=58;break;case 54:h.prev=54,h.t0=h.catch(2),console.info(h.t0),T>=l||4001==h.t0.code?(d("ADD_FAILED_TXS",""),4001==h.t0.code?e("User denied transaction signature."):t(h.t0)):r({retryAttempt:T});case 58:case"end":return h.stop()}}),h,null,[[2,54]])})));return function(e){return h.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return H.apply(this,arguments)}),_bulksendTokenForNFT:(C=Object(le.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h,k,x,T,S,v,y,A,w,R;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,c=r.getters,m=r.rootState,r.rootGetters,d=r.dispatch,f=r.commit,l=n.uniqueId,h=n.tokenAddress,k=n.estimateGas,x=void 0===k?0:k,T=n.decimals,S=n.addresses,v=n.amounts,y=n.tokenIds,A=n.nonce,w=void 0===A?0:A,R=o.checkSimpleTimes,t.abrupt("return",new Promise((function(t,r){var n=function(){var k=Object(le.a)(regeneratorRuntime.mark((function k(A){var O,j,E,_,I,P,address,F,B,G,D,K,U,data,N,C,H,L,V,s,X,z,M,W,J,Y,Q,Z,$,ee;return regeneratorRuntime.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return O=A.retryAttempt,j=void 0===O?1:O,j++,k.prev=2,E=m.metamask.ethAccount,k.next=6,c.bulksenderInstance();case 6:return _=k.sent,I=_._address,l=Object(be.fromAscii)(l),k.next=11,d("getNFTActionType");case 11:return P=k.sent,address=o.referralAddress,k.next=15,d("common/checkAddressIsValid",{address:address},{root:!0});case 15:if(k.sent,F=Object(ge.a)("0"),B=[],G=[],v.forEach((function(e){var t=Object(ge.a)(e).times(Object(ge.a)(10).pow(parseInt(T)));F=F.plus(t),B.push(t.toString(10))})),y.forEach((function(e){G.push(Object(ge.a)(e).toString(10))})),D=F.toString(10),K=Object(ge.a)(y.length).toString(10),G.unshift(K),B.unshift(D),(U=[].concat(S)).unshift(I),data="0x",!o.usedBurnerKey){k.next=51;break}return N=o.burnerKey,C=o.burner,H=o.burnerSignature,L=H.v,V=H.r,s=H.s,data=_.methods.bulksendNFTTokenForBurners(h,U,G,B,P,l,o.referralAddress,C,L,V,s).encodeABI(),k.next=37,d("getChainId");case 37:return X=k.sent,z=e.from(N.privateKey.replace("0x",""),"hex"),M={nonce:Object(be.numberToHex)(w),gasPrice:Object(be.toHex)(Object(be.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(be.numberToHex)(x+o.commonExtraGas+o.delegaterExtraGas),to:I,value:Object(be.toHex)(c.txFee),data:data,chainId:X},(W=new EthereumTx(M)).sign(z),J=W.serialize(),Y="0x"+J.toString("hex"),Q={method:"eth_sendRawTransaction",params:[Y]},k.next=47,d("metamask/sendAsync",Q,{root:!0});case 47:Z=k.sent,t(Z),k.next=61;break;case 51:if(data=_.methods.bulksendNFTToken(h,U,G,B,P,l,o.referralAddress).encodeABI(),0!=x){k.next=56;break}return k.next=55,_.methods.bulksendNFTToken(h,U,G,B,P,l,o.referralAddress).estimateGas({from:E,value:Object(be.toHex)(c.txFee)});case 55:x=k.sent;case 56:return $={method:"eth_sendTransaction",params:[{from:E,to:I,gas:Object(be.numberToHex)(x+o.commonExtraGas),gasPrice:Object(be.toHex)(Object(be.toWei)(o.gasPrice.toString(),"gwei")),value:Object(be.toHex)(c.txFee),data:data}],from:E},k.next=59,d("metamask/sendAsync",$,{root:!0});case 59:ee=k.sent,t(ee);case 61:console.log("bulksend tx",x),k.next=68;break;case 64:k.prev=64,k.t0=k.catch(2),console.info(k.t0),j>=R||4001==k.t0.code?(f("ADD_FAILED_TXS",""),4001==k.t0.code?t("User denied transaction signature."):r(k.t0)):n({retryAttempt:j});case 68:case"end":return k.stop()}}),k,null,[[2,64]])})));return function(e){return k.apply(this,arguments)}}();n({})})));case 4:case"end":return t.stop()}}),t)}))),function(e,t){return C.apply(this,arguments)}),bulksendToken:(N=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,n=t.rootGetters,o=t.dispatch,c=t.commit,m=r.item,d=n["token/isNFTToken"],f=void 0,l=m.uniqueId,!d){e.next=11;break}return e.next=8,o("_bulksendTokenForNFT",{batch:m});case 8:f=e.sent,e.next=14;break;case 11:return e.next=13,o("_bulksendEther",{batch:m});case 13:f=e.sent;case 14:if("User denied transaction signature."==f||null==f||null==f){e.next=23;break}return console.info("txHash",f),c("ADD_TX",f),o("common/updateBulkSentStatus",{status:0,txHash:f,uniqueId:l},{root:!0}),o("checkBulksenderTransactionStatus",{uniqueId:l,txHash:f}),e.abrupt("return",!0);case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)}),bulksendEther:(U=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.item,m=c.uniqueId,e.next=5,n("_bulksendEther",{batch:c});case 5:if("User denied transaction signature."==(d=e.sent)){e.next=15;break}return console.info("txHash",d),o("ADD_TX",d),n("common/updateBulkSentStatus",{status:0,txHash:d,uniqueId:m},{root:!0}),n("checkBulksenderTransactionStatus",{uniqueId:m,txHash:d}),e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),function(e,t){return U.apply(this,arguments)}),_bulksendEther:(K=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,f=r.batch,l=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var h=Object(le.a)(regeneratorRuntime.mark((function h(k){var x,T,S,v,y,address,A,w,R,O,j,E,_,I,P,F,B,G,D;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(x=k.retryAttempt,T=void 0===x?1:x,T++,h.prev=2,S=o.metamask.providerName,v=f.addressValues,y=o.token,address=y.address,A=y.tokenSelected,w=A.decimals,R=[],O=[],v.forEach((function(e){var t=Object(ge.a)(e.amount).times(Object(ge.a)(10).pow(Object(ge.a)(w))).toString(10);R.push(e.address),O.push(t)})),E="bulksendToken","0x0000000000000000000000000000000000000000"==(j=address)&&(j="0x1::aptos_coin::AptosCoin",E="bulksendCoin"),_={type:"entry_function_payload",function:n.bulksenderAddress+"::"+E,type_arguments:[j],arguments:[R,O]},P={payload:_,options:I={}},F={},"Petra"!=S){h.next=27;break}return h.next=20,c["metamask/getEthereumProvider"]();case 20:return B=h.sent,h.next=23,B.signAndSubmitTransaction(_,I);case 23:F=h.sent,console.info(F),h.next=36;break;case 27:return h.next=29,m("walletAdapter/signTransaction",P,{root:!0});case 29:return G=h.sent,h.next=32,c["metamask/aptosClient"]();case 32:return D=h.sent,h.next=35,D.submitTransaction(G);case 35:F=h.sent;case 36:console.log("bulksend tx sent",F.hash),e(F.hash),h.next=43;break;case 40:h.prev=40,h.t0=h.catch(2),T>=l||4001==h.t0.code?(d("ADD_FAILED_TXS",""),4001==h.t0.code?e("User denied transaction signature."):t(h.t0)):r({retryAttempt:T});case 43:case"end":return h.stop()}}),h,null,[[2,40]])})));return function(e){return h.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return K.apply(this,arguments)}),signTransaction:(D=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,data,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootState,o=t.rootGetters,t.dispatch,t.commit,c=r.transaction,e.prev=2,e.next=5,o["metamask/getEthereumProvider"]();case 5:if(m=e.sent,"Slope"!=n.metamask.providerName){e.next=22;break}return d=bs58.encode(c.serializeMessage()),e.next=11,m.signTransaction(d);case 11:if(f=e.sent,l=f.msg,data=f.data,"ok"!==l){e.next=19;break}return c.addSignature(new PublicKey(data.publicKey),bs58.decode(data.signature)),e.abrupt("return",c);case 19:return e.abrupt("return",null);case 20:e.next=26;break;case 22:return e.next=24,m.signTransaction(c);case 24:return h=e.sent,e.abrupt("return",h);case 26:e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(2),e.abrupt("return",null);case 31:case"end":return e.stop()}}),e,null,[[2,28]])}))),function(e,t){return D.apply(this,arguments)}),processDappFee:(G=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootState,o=t.rootGetters,t.dispatch,t.commit,c=r.transaction,m=o["metamask/networkConfig"].feeReceiverAddress,e.prev=3,e.next=6,o["bulksender/txFee"];case 6:return d=e.sent,!n.isVIP&&d>0&&c.add(SystemProgram.transfer({fromPubkey:c.feePayer,toPubkey:new PublicKey(m),lamports:d})),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(3),console.info(e.t0),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return G.apply(this,arguments)}),estimateGasForPerTransferUsedBulksender:(B=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,S,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,o=t.rootGetters,c=t.dispatch,t.commit,m=r.tokenAddress,d=r.testAddresses,f=r.testBalances,l=r.testTokenIds,e.prev=2,h=d,k=f,"0x0000000000000000000000000000000000000000"!=m){e.next=10;break}return e.next=8,c("estimateGasForPerEtherTransfer",{tokenAddress:m,addresses:h,balances:k});case 8:return x=e.sent,e.abrupt("return",x+n.etherDelegateCallExtraGas);case 10:if(!o["token/isNFTToken"]){e.next=17;break}return T=l,e.next=15,c("estimateGasForPerNFTTokenTransfer",{tokenAddress:m,addresses:h,balances:k,tokenIds:T});case 15:return S=e.sent,e.abrupt("return",S);case 17:return e.next=19,c("estimateGasForPerTokenTransfer",{tokenAddress:m,addresses:h,balances:k});case 19:return v=e.sent,e.abrupt("return",v);case 23:if(e.prev=23,e.t0=e.catch(2),console.info("estimateGasForPerTransferUsedBulksender",e.t0),"0x0000000000000000000000000000000000000000"!=m){e.next=28;break}return e.abrupt("return",5e4);case 28:return e.abrupt("return",-1);case 29:case"end":return e.stop()}}),e,null,[[2,23]])}))),function(e,t){return B.apply(this,arguments)})},Object(he.a)(n,"estimateGasForPerTransferUsedBulksender",(F=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,t.rootGetters,t.dispatch,t.commit,"0x0000000000000000000000000000000000000000"!=r.tokenAddress){e.next=4;break}return e.abrupt("return",n.gasCostPerTransfer.eth);case 4:return e.abrupt("return",n.gasCostPerTransfer.token);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return F.apply(this,arguments)})),Object(he.a)(n,"estimateGasForBatchTransfer",(P=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,o=t.rootGetters,c=t.dispatch,t.commit,m=r.tokenAddress,d=r.addresses,f=r.amounts,l=r.tokenIds,e.prev=2,h=f,"0x0000000000000000000000000000000000000000"!=m){e.next=9;break}return e.next=7,c("estimateGasForBatchEtherTransfer",{tokenAddress:m,addresses:d,balances:h});case 7:return k=e.sent,e.abrupt("return",k+n.etherDelegateCallExtraGas);case 9:if(!o["token/isNFTToken"]){e.next=15;break}return e.next=13,c("estimateGasForBatchNFTTokenTransfer",{tokenAddress:m,addresses:d,balances:h,tokenIds:l});case 13:return x=e.sent,e.abrupt("return",x);case 15:return e.next=17,c("estimateGasForBatchTokenTransfer",{tokenAddress:m,addresses:d,balances:h});case 17:return T=e.sent,e.abrupt("return",T);case 21:if(e.prev=21,e.t0=e.catch(2),console.info("estimateGasForBatchTransferUsedBulksender",e.t0),"0x0000000000000000000000000000000000000000"!=m){e.next=26;break}return e.abrupt("return",5e4);case 26:return e.abrupt("return",-1);case 27:case"end":return e.stop()}}),e,null,[[2,21]])}))),function(e,t){return P.apply(this,arguments)})),Object(he.a)(n,"estimateBulksendSize",(I=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,t.rootGetters,o=t.dispatch,t.commit,c=r.tokenAddress,m=r.testAddresses,d=r.testBalances,e.prev=2,"0x0000000000000000000000000000000000000000"!=c){e.next=5;break}return e.abrupt("return",n.etherBatchSize);case 5:return f=m,l=d,e.next=9,o("estimateGasForPerTransfer",{tokenAddress:c,addresses:f,balances:l});case 9:return h=e.sent,k=parseInt(n.maxGasUsed/parseFloat(h)),n.simple,e.abrupt("return",k);case 15:return e.prev=15,e.t0=e.catch(2),console.info(e.t0),e.abrupt("return",0);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),function(e,t){return I.apply(this,arguments)})),Object(he.a)(n,"estimateGasForPerTokenTransfer",(_=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,x=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,S=T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(le.a)(regeneratorRuntime.mark((function m(T){var v,y,A,w,R,O,j,E,_,I,P,F,B,G,D,K,U,N,C,H,L,V,X,z,M,W,J;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return v=T.retryAttempt,y=void 0===v?0:v,y++,m.prev=2,A=n.simple,w=c.metamask.ethAccount,(R=c.token).allowance,O=R.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return j=m.sent,E=j._address,_=O.decimals,I=Object(ge.a)("0"),F=[],(P=h).forEach((function(e,t){var r=k[t],n=Object(ge.a)(r).times(Object(ge.a)(10).pow(_));F.push(n.toString(10)),I=I.plus(n)})),B=I.toString(10),m.next=18,d("createNewUniqueId");case 18:return G=m.sent,D=[E],K=[B],(S.includes(w)||S.includes(l))&&f("SET_SIMPLE",A=!0),U=0,N="0x",N=A?j.methods.bulksendTokenSimple(l,D,K,G).encodeABI():j.methods.bulksendToken(l,D,K,G).encodeABI(),C={method:"eth_estimateGas",params:[{from:w,to:E,data:N,value:Object(be.toHex)(Object(ge.a)(o.txFee).toString(10))}],from:w},m.next=28,d("metamask/sendAsync",C,{root:!0});case 28:return U=m.sent,U=Object(be.hexToNumber)(U),H=Object(be.hexToBytes)(N).length,L=0,V="0x",D=D.concat(P),K=K.concat(F),V=A?j.methods.bulksendTokenSimple(l,D,K,G).encodeABI():j.methods.bulksendToken(l,D,K,G).encodeABI(),X={method:"eth_estimateGas",params:[{from:w,to:E,data:V,value:Object(be.toHex)(Object(ge.a)(o.txFee).toString(10))}],from:w},m.next=39,d("metamask/sendAsync",X,{root:!0});case 39:if(L=m.sent,L=Object(be.hexToNumber)(L),!(0==U||0==L||L>=8e6)){m.next=43;break}throw Error("EstimateGasForPerTransfer failed");case 43:try{h=new Set(h),h=Array.from(h)}catch(e){}z=Object(be.hexToBytes)(V).length,M=parseInt((z-H)/parseFloat(h.length)),W=parseInt((L-U)/parseFloat(h.length)),(J=parseInt(n.maxGasUsed/parseFloat(W)))*M>1024*n.maxBlockByteSizeKB&&(J=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(M)),W=parseInt(n.maxGasUsed/parseFloat(J))),f("SET_BASE_CALLING_GAS",U),e(W),m.next=59;break;case 55:m.prev=55,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),y>=x?t(m.t0):r({retryAttempt:y});case 59:case"end":return m.stop()}}),m,null,[[2,55]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)})),Object(he.a)(n,"estimateGasForBatchTokenTransfer",(E=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,x=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,S=T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(le.a)(regeneratorRuntime.mark((function m(T){var v,y,A,w,R,O,j,E,_,I,P,F,B,G,D,K,U,N,C;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return v=T.retryAttempt,y=void 0===v?0:v,y++,m.prev=2,A=n.simple,w=c.metamask.ethAccount,(R=c.token).allowance,O=R.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return j=m.sent,E=j._address,_=O.decimals,I=Object(ge.a)("0"),F=[],(P=h).forEach((function(e,t){var r=k[t],n=Object(ge.a)(r).times(Object(ge.a)(10).pow(_));F.push(n.toString(10)),I=I.plus(n)})),B=I.toString(10),m.next=18,d("createNewUniqueId");case 18:return G=m.sent,D=[E],K=[B],(S.includes(w)||S.includes(l))&&f("SET_SIMPLE",A=!0),U=0,N="0x",D=D.concat(P),K=K.concat(F),N=A?j.methods.bulksendTokenSimple(l,D,K,G).encodeABI():j.methods.bulksendToken(l,D,K,G).encodeABI(),C={method:"eth_estimateGas",params:[{from:w,to:E,data:N,value:Object(be.toHex)(Object(ge.a)(o.txFee).toString(10))}],from:w},m.next=30,d("metamask/sendAsync",C,{root:!0});case 30:U=m.sent,U=Object(be.hexToNumber)(U),e(U),m.next=39;break;case 35:m.prev=35,m.t0=m.catch(2),console.info("estimateGasForBatchTokenTransfer",m.t0),y>=x?t(m.t0):r({retryAttempt:y});case 39:case"end":return m.stop()}}),m,null,[[2,35]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)})),Object(he.a)(n,"estimateGasForPerNFTTokenTransfer",(j=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.balances,x=r.tokenIds,T=n.checkSimpleTimes+2,(S=m["metamask/networkConfig"]).specialTokenList,S.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(le.a)(regeneratorRuntime.mark((function m(S){var v,y,A,w,R,O,j,E,_,I,P,F,B,G,D,K,U,N,C,H,L,V,X,z,M,W,J,Y,Q,Z;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return v=S.retryAttempt,y=void 0===v?0:v,y++,m.prev=2,n.simple,A=c.metamask.ethAccount,(w=c.token).allowance,R=w.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return O=m.sent,j=O._address,E=R.decimals,_=Object(ge.a)("0"),P=[],F=[],(I=h).forEach((function(e,t){var r=k[t],n=x[t],o=Object(ge.a)(r).times(Object(ge.a)(10).pow(E));P.push(o.toString(10)),_=_.plus(o),F.push(Object(ge.a)(n).toString(10))})),B=_.toString(10),m.next=19,d("createNewUniqueId");case 19:return G=m.sent,m.next=22,d("getNFTActionType");case 22:return D=m.sent,K=Object(ge.a)(x.length).toString(10),U=[j],N=[B],C=[K],H=0,L=O.methods.bulksendNFTToken(l,U,C,N,D,G,A).encodeABI(),V={method:"eth_estimateGas",params:[{from:A,to:j,data:L,value:Object(be.toHex)(Object(ge.a)(o.txFee).toString(10))}],from:A},m.next=32,d("metamask/sendAsync",V,{root:!0});case 32:return H=m.sent,H=Object(be.hexToNumber)(H),X=Object(be.hexToBytes)(L).length,z=0,U=U.concat(I),N=N.concat(P),C=C.concat(F),M=O.methods.bulksendNFTToken(l,U,C,N,D,G,A).encodeABI(),W={method:"eth_estimateGas",params:[{from:A,to:j,data:M,value:Object(be.toHex)(Object(ge.a)(o.txFee).toString(10))}],from:A},m.next=43,d("metamask/sendAsync",W,{root:!0});case 43:if(z=m.sent,z=Object(be.hexToNumber)(z),!(0==H||0==z||z>=8e6)){m.next=47;break}throw Error("EstimateGasForPerTransfer failed");case 47:try{h=new Set(h),h=Array.from(h)}catch(e){}J=Object(be.hexToBytes)(M).length,Y=parseInt((J-X)/parseFloat(h.length)),Q=parseInt((z-H)/parseFloat(h.length)),(Z=parseInt(n.maxGasUsed/parseFloat(Q)))*Y>1024*n.maxBlockByteSizeKB&&(Z=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(Y)),Q=parseInt(n.maxGasUsed/parseFloat(Z))),f("SET_BASE_CALLING_GAS",H),e(Q),m.next=63;break;case 59:m.prev=59,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),y>=T?t(m.t0):r({retryAttempt:y});case 63:case"end":return m.stop()}}),m,null,[[2,59]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)})),Object(he.a)(n,"estimateGasForBatchNFTTokenTransfer",(O=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,t.commit,f=r.tokenAddress,l=r.addresses,h=r.balances,k=r.tokenIds,x=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(le.a)(regeneratorRuntime.mark((function m(T){var S,v,y,A,w,R,O,j,E,_,I,P,F,B,G,D,K,U,N,C,H,L;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=T.retryAttempt,v=void 0===S?0:S,v++,m.prev=2,n.simple,y=c.metamask.ethAccount,(A=c.token).allowance,w=A.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return R=m.sent,O=R._address,j=w.decimals,E=Object(ge.a)("0"),I=[],P=[],(_=l).forEach((function(e,t){var r=h[t],n=k[t],o=Object(ge.a)(r).times(Object(ge.a)(10).pow(j));I.push(o.toString(10)),E=E.plus(o),P.push(Object(ge.a)(n).toString(10))})),F=E.toString(10),m.next=19,d("createNewUniqueId");case 19:return B=m.sent,m.next=22,d("getNFTActionType");case 22:return G=m.sent,D=Object(ge.a)(k.length).toString(10),U=[F],N=[D],C=0,K=(K=[O]).concat(_),U=U.concat(I),N=N.concat(P),H=R.methods.bulksendNFTToken(f,K,N,U,G,B,y).encodeABI(),L={method:"eth_estimateGas",params:[{from:y,to:O,data:H,value:Object(be.toHex)(Object(ge.a)(o.txFee).toString(10))}],from:y},m.next=35,d("metamask/sendAsync",L,{root:!0});case 35:C=m.sent,C=Object(be.hexToNumber)(C),e(C),m.next=44;break;case 40:m.prev=40,m.t0=m.catch(2),console.info("estimateGasForBatchTokenTransfer",m.t0),v>=x?t(m.t0):r({retryAttempt:v});case 44:case"end":return m.stop()}}),m,null,[[2,40]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return O.apply(this,arguments)})),Object(he.a)(n,"estimateGasForPerEtherTransfer",(R=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,d=t.commit,r.tokenAddress,f=r.addresses,l=r.balances,h=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var k=Object(le.a)(regeneratorRuntime.mark((function k(x){var T,S,v,y,A,w,R,O,j,E,_,I,P,F,B,G,D,K,U,N,C,H,L,V,X,z,M;return regeneratorRuntime.wrap((function(k){for(;;)switch(k.prev=k.next){case 0:return T=x.retryAttempt,S=void 0===T?0:T,S++,k.prev=2,v=c.metamask.ethAccount,(y=c.token).allowance,A=y.tokenSelected,k.next=7,o.bulksenderInstance();case 7:return w=k.sent,R=w._address,O=A.decimals,j=Object(ge.a)("0"),_=[],(E=f).forEach((function(e,t){var r=l[t],n=Object(ge.a)(r).times(Object(ge.a)(10).pow(O));_.push(n.toString(10)),j=j.plus(n)})),I=j.toString(10),k.next=17,m("createNewUniqueId");case 17:return P=k.sent,F=[R],B=[I],G=j.plus(Object(ge.a)(o.txFee)).toString(10),k.next=23,w.methods.bulksendEther(F,B,P).encodeABI();case 23:return D=k.sent,K={method:"eth_estimateGas",params:[{from:v,to:R,data:D,value:Object(be.toHex)(G)}],from:v},k.next=27,m("metamask/sendAsync",K,{root:!0});case 27:return U=k.sent,U=Object(be.hexToNumber)(U),N=Object(be.hexToBytes)(D).length,F=F.concat(E),B=B.concat(_),k.next=34,w.methods.bulksendEther(F,B,P).encodeABI();case 34:return C=k.sent,H={method:"eth_estimateGas",params:[{from:v,to:R,data:C,value:Object(be.toHex)(G)}],from:v},k.next=38,m("metamask/sendAsync",H,{root:!0});case 38:if(L=k.sent,L=Object(be.hexToNumber)(L),!(0==U||0==L||L>=8e6)){k.next=42;break}throw Error("EstimateGasForPerETHTransfer failed");case 42:V=Object(be.hexToBytes)(C).length,X=parseInt((V-N)/parseFloat(f.length)),z=parseInt((L-U)/parseFloat(f.length)),(M=parseInt(n.maxGasUsed/parseFloat(z)))*X>1024*n.maxBlockByteSizeKB&&(M=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(X)),z=parseInt(n.maxGasUsed/parseFloat(M))),d("SET_BASE_CALLING_GAS",U),e(z),k.next=56;break;case 53:k.prev=53,k.t0=k.catch(2),S>=h?t(k.t0):r({retryAttempt:S});case 56:case"end":return k.stop()}}),k,null,[[2,53]])})));return function(e){return k.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)})),Object(he.a)(n,"estimateGasForBatchEtherTransfer",(w=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,r.tokenAddress,d=r.addresses,f=r.balances,l=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(le.a)(regeneratorRuntime.mark((function n(h){var k,x,T,S,v,y,A,w,R,O,j,E,_,I,P,F,B,G,D;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k=h.retryAttempt,x=void 0===k?0:k,x++,n.prev=2,T=c.metamask.ethAccount,(S=c.token).allowance,v=S.tokenSelected,n.next=7,o.bulksenderInstance();case 7:return y=n.sent,A=y._address,w=v.decimals,R=Object(ge.a)("0"),j=[],(O=d).forEach((function(e,t){var r=f[t],n=Object(ge.a)(r).times(Object(ge.a)(10).pow(w));j.push(n.toString(10)),R=R.plus(n)})),E=R.toString(10),n.next=17,m("createNewUniqueId");case 17:return _=n.sent,I=[A],P=[E],F=R.plus(Object(ge.a)(o.txFee)).toString(10),I=I.concat(O),P=P.concat(j),n.next=25,y.methods.bulksendEther(I,P,_).encodeABI();case 25:return B=n.sent,G={method:"eth_estimateGas",params:[{from:T,to:A,data:B,value:Object(be.toHex)(F)}],from:T},n.next=29,m("metamask/sendAsync",G,{root:!0});case 29:D=n.sent,D=Object(be.hexToNumber)(D),e(D),n.next=37;break;case 34:n.prev=34,n.t0=n.catch(2),x>=l?t(n.t0):r({retryAttempt:x});case 37:case"end":return n.stop()}}),n,null,[[2,34]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return w.apply(this,arguments)})),Object(he.a)(n,"sendBulksenderByPrivateKey",(A=Object(le.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit;case 1:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)})),Object(he.a)(n,"_sendTxFeeToDelegater",(y=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,o=t.rootState,c=t.dispatch,t.commit,m=r.checkSimpleTimes,o.bulksender.burnerKey,e.abrupt("return",new Promise((function(e,t){var d=function(){var f=Object(le.a)(regeneratorRuntime.mark((function f(l){var h,k,x,T,S,v,address,y,A,w,R,O,j,E,_,I,P,F,B,G,D;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,k=void 0===h?1:h,k++,f.prev=2,(x=o.metamask).ethAccount,T=x.accountPublicKey,S=o.token,v=S.tokenSelected,address=S.address,y=o.common.addressInfo,A=y.finalAmount,A=Object(ge.a)(A).times(Object(ge.a)(10).pow(parseInt(v.decimals))).toString(10),f.next=10,c("calDelegaterTotalFee");case 10:return w=f.sent,R=new Transaction,O=new PublicKey(T),f.next=15,n["metamask/connection"]();case 15:return j=f.sent,f.next=18,n["metamask/getEthereumProvider"]();case 18:if(f.sent,v.decimals,console.info(r.burnerKey.address),E=new PublicKey(r.burnerKey.address),v.isETH){f.next=30;break}return _=new PublicKey(address),I=new Token(j,_,TOKEN_PROGRAM_ID,O),f.next=28,Token.getAssociatedTokenAddress(I.associatedProgramId,I.programId,I.publicKey,O);case 28:P=f.sent,R.add(Token.createApproveInstruction(I.programId,P,E,O,[],A));case 30:return R.add(SystemProgram.transfer({fromPubkey:O,toPubkey:E,lamports:w})),f.next=33,j.getRecentBlockhash();case 33:return F=f.sent,B=F.blockhash,R.recentBlockhash=B,R.feePayer=O,f.next=39,c("signTransaction",{transaction:R});case 39:return G=f.sent,f.next=42,j.sendRawTransaction(G.serialize());case 42:D=f.sent,console.log("bulksend tx sent",D),e(D),f.next=50;break;case 47:f.prev=47,f.t0=f.catch(2),k>=m||4001==f.t0.code?t(f.t0):d({retryAttempt:k});case 50:case"end":return f.stop()}}),f,null,[[2,47]])})));return function(e){return f.apply(this,arguments)}}();d({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})),Object(he.a)(n,"calDelegaterTotalFee",(v=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,r=t.rootState,t.dispatch,t.commit,n=r.common.estimateETHCost,o=r.metamask.decimals,c=Object(ge.a)(n).times(Object(ge.a)(10).pow(o)).toString(10),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})),Object(he.a)(n,"checkDelegaterHasReceivedFee",(S=Object(le.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit,e.prev=1,e.abrupt("return",!0);case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,null,[[1,5]])}))),function(e){return S.apply(this,arguments)})),Object(he.a)(n,"_sendRemainTxFeeBack",(T=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,o=t.rootState,t.dispatch,t.commit,r.checkSimpleTimes,o.bulksender.burnerKey,(c=o.metamask).ethAccount,m=c.minGasFee,d=c.accountPublicKey,e.abrupt("return",new Promise((function(e,t){!function(){var t=Object(le.a)(regeneratorRuntime.mark((function t(o){var c,f,l,h,k,x,T,S,v,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.retryAttempt,t.prev=2,c=r.burnerKey,t.next=6,n["metamask/connectionChanged"]();case 6:return f=t.sent,l=new PublicKey(c.address),t.next=10,f.getBalance(l);case 10:return h=t.sent,k=Object(ge.a)(h).minus(Object(ge.a)(m)).toString(10),(x=new Transaction).add(SystemProgram.transfer({fromPubkey:l,toPubkey:new PublicKey(d),lamports:k})),t.next=16,f.getRecentBlockhash();case 16:return T=t.sent,S=T.blockhash,x.recentBlockhash=S,x.feePayer=l,v=Keypair.fromSecretKey(Uint8Array.from(JSON.parse(c.privateKey))),t.next=23,sendAndConfirmTransaction(f,x,[v]);case 23:y=t.sent,e(y),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(2),console.info(t.t0);case 30:case"end":return t.stop()}}),t,null,[[2,27]])})));return function(e){return t.apply(this,arguments)}}()({})})));case 5:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)})),Object(he.a)(n,"sendTxFeeToDelegater",(x=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,n=t.commit,e.next=3,r("_sendTxFeeToDelegater",{});case 3:return o=e.sent,n("SET_DELEGATE_TX_URL",o),n("SET_DELEGATE_TX_STATUS",0),r("checkDelegaterFeeTransactionStatus",{txHash:o}),r("common/saveUsedDelegater",{usedDelegater:!0},{root:!0}),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)}))),function(e){return x.apply(this,arguments)})),Object(he.a)(n,"sendRemainTxFeeBack",(k=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,n=t.commit,e.next=3,r("_sendRemainTxFeeBack",{});case 3:return o=e.sent,n("SET_REMAIN_TX_URL",o),n("SET_REMAIN_TX_STATUS",0),r("checkRemainTransactionStatus",{txHash:o}),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)})),Object(he.a)(n,"sendRawTransactionWithCustomRPC",(function(e,t){e.state,e.getters;var r=e.rootGetters,n=t.serializedTx;return new Promise(function(){var e=Object(le.a)(regeneratorRuntime.mark((function e(t,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r["metamask/customRPCWeb3"]();case 2:e.sent.eth.sendSignedTransaction("0x"+n.toString("hex"),(function(e,r){console.info(e),e?o(e):t(r)}));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})),Object(he.a)(n,"signKey",(h=Object(le.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,k,x,data,T,S,v,y,s,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,r=t.rootState,n=t.dispatch,o=t.commit,c=r.bulksender,m=c.bulksenderAddress,d=c.burnerKey,f=r.metamask,l=f.netId,h=f.ethAccount,k=parseInt((new Date).getTime()/1e3)+604800,x={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Agent:[{name:"delegater",type:"address"},{name:"expiration",type:"uint256"}]},primaryType:"Agent",domain:{name:"Token Bulksender",version:"1",chainId:l,verifyingContract:m},message:{delegater:d.address,expiration:k}},data=JSON.stringify(x),T={method:"eth_signTypedData_v3",params:[h,data],from:h},e.next=9,n("metamask/sendAsync",T,{root:!0});case 9:return S=e.sent,v=S.substring(2),y="0x"+v.substring(0,64),s="0x"+v.substring(64,128),A=parseInt(v.substring(128,130),16),o("SET_BURNER",[d.address,k]),o("SET_BURNER_SSINATURE",{v:A,r:y,s:s}),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})),Object(he.a)(n,"checkBulksenderTransactionStatus",(l=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.uniqueId,d=r.txHash,f=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(d),e.next=7,o("metamask/getTransactionReceipt",{txHash:d},{root:!0});case 7:null!=(l=e.sent)?(h=l.type,k=l.vm_status,"pending_transaction"!=(x=h)?("Executed successfully"==k?(x=1,c("ADD_SUCCESS_TXS",d)):(x=-2,c("ADD_FAILED_TXS",d)),o("common/updateBulkSentStatus",{status:x,txHash:d,uniqueId:m},{root:!0})):setTimeout((function(){o("checkBulksenderTransactionStatus",{uniqueId:m,txHash:d})}),1e3*f)):setTimeout((function(){o("checkBulksenderTransactionStatus",{uniqueId:m,txHash:d})}),1e3*f),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkBulksenderTransactionStatus",{uniqueId:m,txHash:d})}),1e3*f);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return l.apply(this,arguments)})),Object(he.a)(n,"checkBulksenderVIPBuyingTransactionStatus",(f=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?("0x1"==(l=f.status)||1==l?(l=1,c("SET_IS_VIP",!0)):(l=-2,c("SET_IS_VIP",!1)),c("SET_VIP_TX_STATUS",l)):setTimeout((function(){o("checkBulksenderVIPBuyingTransactionStatus",{txHash:m})}),1e3*d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkBulksenderVIPBuyingTransactionStatus")}),1e3*d);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return f.apply(this,arguments)})),Object(he.a)(n,"checkDelegaterFeeTransactionStatus",(d=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,e.next=6,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 6:if(null==(f=e.sent)){e.next=22;break}if(l=f.confirmationStatus,1!=(h="0x1"==(h=l)||1==h||["finalized","processed","confirmed"].includes(h)?1:-2)){e.next=19;break}return e.next=14,o("checkDelegaterHasReceivedFee");case 14:k=e.sent,console.info("Delegator Fee has received",k),k?c("SET_DELEGATE_TX_STATUS",h):setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d),e.next=20;break;case 19:c("SET_DELEGATE_TX_STATUS",h);case 20:e.next=23;break;case 22:setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),setTimeout((function(){o("checkDelegaterFeeTransactionStatus")}),1e3*d);case 28:case"end":return e.stop()}}),e,null,[[3,25]])}))),function(e,t){return d.apply(this,arguments)})),Object(he.a)(n,"checkRemainTransactionStatus",(m=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?(l=f.confirmationStatus,h="0x1"==(h=l)||1==h||["finalized","processed","confirmed"].includes(h)?1:-2,c("SET_REMAIN_TX_STATUS",h)):setTimeout((function(){o("checkRemainTransactionStatus",{txHash:m})}),1e3*d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkRemainTransactionStatus")}),1e3*d);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return m.apply(this,arguments)})),Object(he.a)(n,"getTransactionCount",(c=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,address,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,address=r.address,e.next=4,n("metamask/getTransactionCount",{address:address},{root:!0});case 4:return o=e.sent,o=Object(be.hexToNumberString)(o),e.abrupt("return",parseInt(o));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})),Object(he.a)(n,"bulkFindBadAddress",(o=Object(le.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,k,x,T,S,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,k=r.amounts,x=r.tokenIds,T=c["metamask/networkConfig"],S=T.rpcCallRetryAttempt,T.tokenQueryContract,v=n.simple,y=c["metamask/networkConfig"].whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(le.a)(regeneratorRuntime.mark((function n(T){var A,w,R,O,j,E,_,I,data,P,F,B,G,D,K,U,N,C,H,L,V,X,z,M,W,J,Y,Q,Z,$,ee;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return A=T.retryAttempt,w=void 0===A?1:A,w++,n.prev=2,R=m.metamask.ethAccount,(y.includes(R)||y.includes(l))&&(v=!0),n.next=7,o.bulksenderInstance();case 7:return O=n.sent,j=m.token.tokenSelected,E=c["token/isNFTToken"],_=c["token/isERC1155"],I=c["token/isERC721"],P=Object(ge.a)("0"),F=Object(ge.a)("0"),B=[],E||(G=j.decimals,k.forEach((function(e,t){var r=Object(ge.a)(e).times(Object(ge.a)(10).pow(G));B.push(r.toString(10)),F=F.plus(r)}))),j.isETH?(data=O.methods.findBadAddressesForEther(h,B).encodeABI(),P=P.plus(F)):E?(I&&(data=O.methods.findBadAddressesForERC721(l,h,x,v).encodeABI()),_&&(data=O.methods.findBadAddressesForERC1155(l,h,k,x).encodeABI())):data=O.methods.findBadAddressesForERC20(l,h,B,F.toString(10),v).encodeABI(),D=P.toString(10),K={method:"eth_call",params:[{from:R,to:O._address,data:data,value:Object(be.toHex)(D)},"latest"],from:R},n.next=21,d("metamask/sendAsync",K,{root:!0});case 21:U=n.sent,N=[],C=[],H=[],_?(L=xe.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badBalances",type:"uint256[]"},{name:"badTokenIds",type:"uint256[]"}],U),V=L.badAddresses,X=L.badBalances,z=L.badTokenIds,N=V,C=X,H=z):I?(M=xe.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badTokenIds",type:"uint256[]"}],U),W=M.badAddresses,J=M.badTokenIds,N=W,H=J):(Y=xe.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badBalances",type:"uint256[]"}],U),Q=Y.badAddresses,Z=Y.badBalances,N=Q,C=Z),j.isETH||_?e({badAddresses:N,badBalances:C,badTokenIds:H}):($=[],ee=[],N.forEach((function(address,e){"0x0000000000000000000000000000000000000000"!=address?$.push(address):ee.push(address)})),($.length==N.length||$>ee)&&!v?(v=!0,r({retryAttempt:w})):(f("SET_SIMPLE",v),e({badAddresses:N,badBalances:C,badTokenIds:H}))),n.next=33;break;case 29:n.prev=29,n.t0=n.catch(2),v=!1,w>=S?t(n.t0):r({retryAttempt:w});case 33:case"end":return n.stop()}}),n,null,[[2,29]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})),n);t.default={namespaced:!0,state:function(){var e;return e={bulksenderAddress:"",txFee:"20000000000000000",isVIP:!1,vipFee:"1000000000000000000",addressUrl:"",txUrl:"",explorerParams:"",maxGasUsed:4e5,gasCostPerTransfer:{eth:2e3,token:2e3,nft:2e3},maxBlockByteSizeKB:28,gasPrice:10,transferTestingCount:5,etherBatchSize:220,simple:!1,checkSimpleTimes:4,transferTestingAmounts:[1,10,100,1e3,1e4,1e5,1e6,1e7]},Object(he.a)(e,"etherBatchSize",220),Object(he.a)(e,"estimateETHCost",.01),Object(he.a)(e,"vipTxHash",""),Object(he.a)(e,"vipTxStatus",-1),Object(he.a)(e,"txs",[]),Object(he.a)(e,"successTxs",[]),Object(he.a)(e,"failedTxs",[]),Object(he.a)(e,"burnerKey",{}),Object(he.a)(e,"usedBurnerKey",!1),Object(he.a)(e,"burner",[]),Object(he.a)(e,"burnerSignature",Object(he.a)({v:27,r:""},"v","")),Object(he.a)(e,"delegaterTxUrl",""),Object(he.a)(e,"remainTxUrl",""),Object(he.a)(e,"delegaterTxStatus",-1),Object(he.a)(e,"remainTxStatus",-1),Object(he.a)(e,"baseCallingGas",1e5),Object(he.a)(e,"delegaterExtraGas",3e4),Object(he.a)(e,"commonExtraGas",1e5),Object(he.a)(e,"referralFee",1e16),Object(he.a)(e,"etherDelegateCallExtraGas",0),Object(he.a)(e,"etherSpecialAcountExtraGas",1e4),Object(he.a)(e,"referralAddress","0x0000000000000000000000000000000000000000"),Object(he.a)(e,"extraFee",0),e},getters:Te,mutations:{SET_BULKSENDER_ADDRESS:function(e,address){e.bulksenderAddress=address},SET_TX_FEE:function(e,t){e.txFee=t},SET_VIP_FEE:function(e,t){e.vipFee=t},SET_IS_VIP:function(e,t){e.isVIP=t},SET_REFERRAL_FEE:function(e,t){e.referralFee=t},SET_GAS_PRICE:function(e,t){e.gasPrice=t},SET_ADDRESS_URL:function(e,t){e.addressUrl=t},SET_TX_URL:function(e,t){e.txUrl=t},SET_EXPLORER_PARAMS:function(e,t){e.explorerParams=t},ADD_TX:function(e,t){e.txs.push(t)},ADD_SUCCESS_TXS:function(e,t){e.successTxs.push(t)},ADD_FAILED_TXS:function(e,t){e.failedTxs.push(t)},SET_SIMPLE:function(e,t){e.simple=t},SET_estimateCostPerTransfer:function(e,t){e.simple=t},SET_VIP_TX_HASH:function(e,t){e.vipTxHash=t},SET_VIP_TX_STATUS:function(e,t){e.vipTxStatus=t},SET_BURNER_KEY:function(e,t){e.burnerKey=t},SET_USED_BURNER_KEY:function(e,t){e.usedBurnerKey=t},SET_BURNER:function(e,t){e.burner=t},SET_BURNER_SSINATURE:function(e,t){e.burnerSignature=t},SET_DELEGATE_TX_URL:function(e,t){e.delegaterTxUrl=t},SET_REMAIN_TX_URL:function(e,t){e.remainTxUrl=t},SET_DELEGATE_TX_STATUS:function(e,t){e.delegaterTxStatus=t},SET_REMAIN_TX_STATUS:function(e,t){e.remainTxStatus=t},SET_REFERRAL_ADDRESS:function(e,address){e.referralAddress=address},SET_BASE_CALLING_GAS:function(e,t){e.baseCallingGas=t},SET_EXTRA_FEE:function(e,t){e.extraFee=t},CLEAR:function(e){e.extraFee=0,e.successTxs=[],e.failedTxs=[],e.txs=[],e.remainTxUrl="",e.delegaterTxUrl=""}},actions:Se}}.call(this,r(10).Buffer)}}]);